<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#6D28D9">
  <title>Modern Todo List</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Custom styles */
    body {
      font-family: 'Inter', sans-serif;
    }

    .todo-container {
      max-width: 90%;
      width: 600px;
    }

    .task-item {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      transform-origin: center;
    }

    .task-item:hover {
      transform: translateY(-3px) scale(1.01);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    .completed {
      text-decoration: line-through;
      opacity: 0.7;
    }

    .fade-in {
      animation: fadeIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .fade-out {
      animation: fadeOut 0.5s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      to {
        opacity: 0;
        transform: translateY(-20px) scale(0.9);
      }
    }

    /* Custom scrollbar */
    .task-list::-webkit-scrollbar {
      width: 6px;
    }

    .task-list::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 10px;
    }

    .task-list::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 10px;
    }

    .task-list::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    /* Loader animation */
    .loader {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 3px solid #6D28D9;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      display: none;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* Button animations */
    .btn-pulse {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(109, 40, 217, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(109, 40, 217, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(109, 40, 217, 0);
      }
    }

    /* Moving gradient background */
    .animated-gradient {
      background-size: 300% 300%;
      animation: gradientMove 15s ease infinite;
    }

    @keyframes gradientMove {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* Responsive improvements */
    @media (max-width: 640px) {
      .todo-container {
        width: 95%;
        padding: 1rem;
      }

      .task-item {
        padding: 0.75rem;
      }
    }
  </style>
</head>

<body
  class="min-h-screen animated-gradient bg-gradient-to-br from-purple-500 via-pink-400 to-indigo-500 flex flex-col items-center py-8 px-4">
  <div class="todo-container bg-white/90 backdrop-blur-md rounded-2xl shadow-xl p-6 md:p-8 border border-white/20">
    <h1
      class="text-3xl font-bold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600">
      Modern Todo List</h1>
    <p class="text-center text-gray-500 mb-6">Stay organized and productive</p>

    <!-- Add task form -->
    <form id="todo-form" class="mb-6">
      <div class="flex flex-col sm:flex-row items-center gap-2">
        <input type="text" id="todo-input" placeholder="Add a new task..."
          class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
          required>
        <button type="submit"
          class="w-full sm:w-auto bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 btn-pulse">
          <span>Add Task</span>
          <div class="loader" id="loader"></div>
        </button>
      </div>
    </form>

    <!-- Task filters -->
    <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-3">
      <div class="text-sm text-gray-500"><span id="task-count">0</span> tasks</div>
      <div class="flex gap-2">
        <button id="filter-all"
          class="text-sm px-3 py-1 rounded-full bg-purple-600 text-white transition-all hover:scale-105">All</button>
        <button id="filter-active"
          class="text-sm px-3 py-1 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-all hover:scale-105">Active</button>
        <button id="filter-completed"
          class="text-sm px-3 py-1 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-all hover:scale-105">Completed</button>
      </div>
    </div>

    <!-- Task list -->
    <div class="task-list max-h-[400px] overflow-y-auto">
      <ul id="todo-list" class="space-y-3"></ul>
      <div id="empty-state" class="text-center py-8 text-gray-400 fade-in">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-3 text-gray-300" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
        </svg>
        <p>No tasks yet. Add a new task to get started!</p>
      </div>
    </div>

    <!-- Clear completed button -->
    <div class="mt-6 text-center">
      <button id="clear-completed"
        class="text-sm text-gray-500 hover:text-purple-600 transition-colors hover:underline">
        Clear completed tasks
      </button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // DOM Elements
      const todoForm = document.getElementById('todo-form');
      const todoInput = document.getElementById('todo-input');
      const todoList = document.getElementById('todo-list');
      const emptyState = document.getElementById('empty-state');
      const taskCount = document.getElementById('task-count');
      const loader = document.getElementById('loader');
      const filterAll = document.getElementById('filter-all');
      const filterActive = document.getElementById('filter-active');
      const filterCompleted = document.getElementById('filter-completed');
      const clearCompleted = document.getElementById('clear-completed');

      // State
      let todos = JSON.parse(localStorage.getItem('todos')) || [];
      let currentFilter = 'all';

      // Initialize
      renderTodos();
      updateTaskCount();

      // Event Listeners
      todoForm.addEventListener('submit', addTodo);
      filterAll.addEventListener('click', () => setFilter('all'));
      filterActive.addEventListener('click', () => setFilter('active'));
      filterCompleted.addEventListener('click', () => setFilter('completed'));
      clearCompleted.addEventListener('click', clearCompletedTasks);

      // Add animation to input field on focus
      todoInput.addEventListener('focus', () => {
        todoInput.classList.add('ring-2', 'ring-purple-500', 'ring-opacity-50');
      });

      todoInput.addEventListener('blur', () => {
        todoInput.classList.remove('ring-2', 'ring-purple-500', 'ring-opacity-50');
      });

      // Functions
      function addTodo(e) {
        e.preventDefault();
        const todoText = todoInput.value.trim();

        if (todoText === '') return;

        // Show loader
        loader.style.display = 'block';

        // Simulate API delay
        setTimeout(() => {
          const newTodo = {
            id: Date.now(),
            text: todoText,
            completed: false,
            createdAt: new Date().toISOString()
          };

          todos.unshift(newTodo); // Add to beginning of array
          saveTodos();
          renderTodos();
          updateTaskCount();

          // Reset form
          todoInput.value = '';
          loader.style.display = 'none';
          todoInput.focus();
        }, 300);
      }

      function toggleTodo(id) {
        todos = todos.map(todo => {
          if (todo.id === id) {
            return { ...todo, completed: !todo.completed };
          }
          return todo;
        });

        saveTodos();
        renderTodos();
      }

      function deleteTodo(id) {
        const todoElement = document.getElementById(`todo-${id}`);
        todoElement.classList.add('fade-out');

        setTimeout(() => {
          todos = todos.filter(todo => todo.id !== id);
          saveTodos();
          renderTodos();
          updateTaskCount();
        }, 500); // Increased to match animation duration
      }

      function editTodo(id) {
        const todo = todos.find(todo => todo.id === id);
        const newText = prompt('Edit task:', todo.text);

        if (newText !== null && newText.trim() !== '') {
          todos = todos.map(todo => {
            if (todo.id === id) {
              return { ...todo, text: newText.trim() };
            }
            return todo;
          });

          saveTodos();
          renderTodos();
        }
      }

      function renderTodos() {
        let filteredTodos = todos;

        if (currentFilter === 'active') {
          filteredTodos = todos.filter(todo => !todo.completed);
        } else if (currentFilter === 'completed') {
          filteredTodos = todos.filter(todo => todo.completed);
        }

        todoList.innerHTML = '';

        if (filteredTodos.length === 0) {
          emptyState.style.display = 'block';
        } else {
          emptyState.style.display = 'none';

          filteredTodos.forEach((todo, index) => {
            const todoItem = document.createElement('li');
            todoItem.id = `todo-${todo.id}`;
            todoItem.className = `task-item fade-in bg-white rounded-xl shadow-sm p-4 flex items-center justify-between gap-2 border-l-4 ${todo.completed ? 'border-green-500' : 'border-purple-500'}`;
            // Add staggered animation delay based on index
            todoItem.style.animationDelay = `${index * 0.1}s`;

            const leftSide = document.createElement('div');
            leftSide.className = 'flex items-center gap-3 flex-1';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.checked = todo.completed;
            checkbox.className = 'w-5 h-5 rounded-md border-gray-300 text-purple-600 focus:ring-purple-500';
            checkbox.addEventListener('change', () => toggleTodo(todo.id));

            const taskText = document.createElement('span');
            taskText.className = `text-gray-800 ${todo.completed ? 'completed' : ''}`;
            taskText.textContent = todo.text;

            leftSide.appendChild(checkbox);
            leftSide.appendChild(taskText);

            const rightSide = document.createElement('div');
            rightSide.className = 'flex items-center gap-2';

            const editButton = document.createElement('button');
            editButton.className = 'text-gray-400 hover:text-purple-600 transition-colors transform hover:scale-110';
            editButton.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        `;
            editButton.addEventListener('click', () => editTodo(todo.id));

            const deleteButton = document.createElement('button');
            deleteButton.className = 'text-gray-400 hover:text-red-600 transition-colors transform hover:scale-110';
            deleteButton.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        `;
            deleteButton.addEventListener('click', () => deleteTodo(todo.id));

            rightSide.appendChild(editButton);
            rightSide.appendChild(deleteButton);

            todoItem.appendChild(leftSide);
            todoItem.appendChild(rightSide);

            todoList.appendChild(todoItem);
          });
        }
      }

      function saveTodos() {
        localStorage.setItem('todos', JSON.stringify(todos));
      }

      function updateTaskCount() {
        taskCount.textContent = todos.length;
      }

      function setFilter(filter) {
        currentFilter = filter;

        // Update active filter button
        [filterAll, filterActive, filterCompleted].forEach(btn => {
          btn.classList.remove('bg-purple-600', 'text-white');
          btn.classList.add('bg-gray-200', 'text-gray-700');
        });

        const activeButton = {
          'all': filterAll,
          'active': filterActive,
          'completed': filterCompleted
        }[filter];

        activeButton.classList.remove('bg-gray-200', 'text-gray-700');
        activeButton.classList.add('bg-purple-600', 'text-white');

        renderTodos();
      }

      function clearCompletedTasks() {
        todos = todos.filter(todo => !todo.completed);
        saveTodos();
        renderTodos();
        updateTaskCount();
      }
    });
  </script>
</body>

</html>